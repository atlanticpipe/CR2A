version: 1
applications:
  - appRoot: webapp
    frontend:
      phases:
        preBuild:
          commands: []  # Nothing to install for a static bundle
        build:
          commands:
            # Emit env.js with Amplify env vars so the static bundle can call the API.
            - |
              cat > env.js <<'EOF'
              (() => {
                "use strict";
                window._env = {
                  API_BASE_URL: "${API_BASE_URL}"
                };
              })();
              EOF
      artifacts:
        baseDirectory: .  # Ship the raw webapp directory
        files:
          - '**/*'
      cache:
        paths: []
