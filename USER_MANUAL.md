# CR2A Chat Interface - User Manual

## Welcome to CR2A Chat Interface! ðŸŽ‰

CR2A Chat Interface is a desktop application that lets you ask questions about your contracts using natural language. Instead of searching through long contract documents, just ask questions like you're talking to a person!

---

## Table of Contents

1. [Getting Started](#getting-started)
2. [First Time Setup](#first-time-setup)
3. [Loading a Contract](#loading-a-contract)
4. [Asking Questions](#asking-questions)
5. [Understanding Responses](#understanding-responses)
6. [Settings & Configuration](#settings--configuration)
7. [Tips & Best Practices](#tips--best-practices)
8. [Troubleshooting](#troubleshooting)
9. [Frequently Asked Questions](#frequently-asked-questions)

---

## Getting Started

### What You Need

- **Windows 10 or 11** (64-bit)
- **8GB RAM** minimum (16GB recommended)
- **2GB free disk space** (for AI model storage)
- **Internet connection** (only needed for first-time setup)
- **A contract analysis JSON file** (generated by ContractAnalysisCLI.exe)

### Installation

1. **Download** the CR2A folder
2. **Extract** to a location like `C:\Program Files\CR2A\`
3. **Double-click** `CR2A.exe` to launch

That's it! No installation wizard, no complicated setup.

### First Launch

When you first open the application:

1. A window will appear with the CR2A Chat Interface interface
2. The chat area will be empty
3. The input box will be disabled (grayed out)
4. You'll see a "Load Contract" button

**Why is the input disabled?** You need to load a contract file first before you can ask questions!

---

## First Time Setup

### The AI Model Download

The first time you ask a question, the application needs to download an AI model called "Pythia" to your computer. This is a one-time process.

**What to expect:**

1. **Size**: ~800MB download
2. **Time**: 30-60 seconds (depending on your internet speed)
3. **Location**: Saved to `C:\Users\YourName\.cr2a_chat\models\`
4. **Frequency**: Only happens once!

**During the download:**

- A progress bar will appear
- The application will show "Downloading model..."
- You can't ask questions until it's complete
- Be patient - this only happens once!

**After the download:**

- All future queries are much faster (3-10 seconds)
- The application works offline
- No more downloads needed

---

## Loading a Contract

### Step 1: Get Your Contract File

You need a **contract analysis JSON file**. This file is created by the ContractAnalysisCLI.exe tool after analyzing a contract document.

**File format**: `contract_analysis.json` or similar
**File type**: JSON (JavaScript Object Notation)

### Step 2: Load the File

**Method 1: Using the Load Button**

1. Click the **"Load Contract"** button
2. A file browser window will open
3. Navigate to your contract JSON file
4. Select the file and click **"Open"**
5. Wait a moment while the file loads
6. You'll see a confirmation message

**Method 2: Using Command Line**

You can also launch the app with a file already loaded:

```bash
CR2A.exe --load "C:\path\to\contract_analysis.json"
```

### Step 3: Verify the File Loaded

After loading:

- âœ… The chat input box becomes enabled (no longer grayed out)
- âœ… You'll see a message like "Contract loaded successfully"
- âœ… Example questions may appear to help you get started
- âœ… You can now start asking questions!

### What If the File Won't Load?

If you see an error message:

- **"File not found"**: Check the file path is correct
- **"Invalid JSON"**: The file might be corrupted or not a valid JSON file
- **"Schema mismatch"**: The file doesn't have the expected contract data structure

**Solution**: Make sure you're using a file generated by ContractAnalysisCLI.exe

---

## Asking Questions

### How to Ask a Question

1. **Type your question** in the input box at the bottom
2. **Press Enter** or click the **"Send"** button
3. **Wait** for the response (3-10 seconds)
4. **Read the answer** in the chat area

### What Questions Can I Ask?

You can ask about anything in the contract! Here are some examples:

#### About Parties

```
Who are the parties in this contract?
Who is the buyer?
Who is the seller?
What is the buyer's address?
```

#### About Terms

```
What are the payment terms?
What is the contract duration?
What are the delivery terms?
What is the warranty period?
How can the contract be terminated?
```

#### About Risks

```
What risks are identified?
What are the financial risks?
What is the highest severity risk?
How can we mitigate the risks?
```

#### About Dates

```
When does the contract start?
When does the contract expire?
What is the first delivery date?
When is payment due?
```

#### About Money

```
What is the total contract value?
What are the payment terms?
Is there a deposit required?
What is the late payment penalty?
Are there any discounts?
```

### Question Tips

**âœ… DO:**

- Ask clear, specific questions
- Use natural language (talk like a person)
- Ask one thing at a time
- Be patient while waiting for responses

**âŒ DON'T:**

- Ask multiple questions in one message
- Use overly complex language
- Ask about things not in the contract
- Expect instant responses (AI takes 3-10 seconds)

### Example Conversation

```
You: Who are the parties in this contract?

AI: The contract is between Acme Corporation (buyer) and 
    TechSupply Inc. (seller).

You: What is the total contract value?

AI: The total contract value is $250,000 USD.

You: When does the contract expire?

AI: The contract expires on January 31, 2025.
```

---

## Understanding Responses

### Response Sources

Responses are labeled to show where they came from:

- **ðŸ’» Pythia Response**: Answered by the local AI (most common)
- **ðŸŒ OpenAI Response**: Answered by OpenAI (if fallback is enabled)

### Response Types

**Direct Answers**

When the AI finds the information:

```
You: What is the contract duration?
AI: The contract duration is 12 months.
```

**Clarification Requests**

When your question is unclear:

```
You: What about the terms?
AI: Could you be more specific? Are you asking about:
    - Payment terms
    - Delivery terms
    - Warranty terms
    - Termination terms
```

**Not Found**

When the information isn't in the contract:

```
You: What is the insurance coverage?
AI: I couldn't find information about insurance coverage 
    in this contract.
```

**Multiple Results**

When there are several relevant pieces of information:

```
You: What are the risks?
AI: I found 3 risks in this contract:
    1. Financial risk: Payment default risk (high severity)
    2. Operational risk: Supply chain disruption (medium)
    3. Legal risk: Jurisdiction clause issues (low)
```

### Conversation History

- All your questions and answers are saved in the chat window
- You can scroll up to review previous conversations
- History is cleared when you close the application
- History is preserved if you load a different contract

---

## Settings & Configuration

### Accessing Settings

Look for a **Settings** button or menu in the application (typically in the top-right corner or menu bar).

### Available Settings

#### 1. Pythia Model Size

Choose between two AI models:

**Pythia-410M (Default)**
- âœ… Faster responses (3-5 seconds)
- âœ… Smaller download (~800MB)
- âœ… Uses less memory (~2GB RAM)
- âš ï¸ Less accurate for complex questions

**Pythia-1B (Advanced)**
- âœ… More accurate responses
- âœ… Better understanding of complex questions
- âš ï¸ Slower responses (5-10 seconds)
- âš ï¸ Larger download (~2GB)
- âš ï¸ Uses more memory (~4GB RAM)

**Recommendation**: Start with Pythia-410M. Upgrade to 1B if you need better accuracy.

#### 2. OpenAI Fallback

Enable this if you want to use OpenAI for complex questions that Pythia can't answer well.

**When enabled:**
- The app will ask for permission before using OpenAI
- You'll be notified that it costs money (OpenAI API charges)
- Responses will be labeled with ðŸŒ

**Requirements:**
- OpenAI API key (configured in `config.txt`)
- Internet connection
- OpenAI account with credits

**Default**: Disabled (Pythia-only mode)

#### 3. Window Settings

The application remembers:
- Window size
- Window position
- Last used settings

These are saved automatically when you close the app.

### Configuration File

Advanced users can edit `config.txt` to configure:

```
# OpenAI API Key (optional)
openai_api_key=sk-your-key-here

# Pythia Model Size (410M or 1B)
pythia_model_size=410M

# OpenAI Fallback (true or false)
openai_fallback_enabled=false

# Window Settings (saved automatically)
window_width=1024
window_height=768
```

---

## Tips & Best Practices

### Getting Better Answers

**1. Be Specific**

âŒ "Tell me about the contract"  
âœ… "What is the contract duration?"

**2. Ask One Thing at a Time**

âŒ "Who are the parties and what are the terms and when does it expire?"  
âœ… "Who are the parties?" (then ask follow-up questions)

**3. Use Keywords from the Contract**

If you know the contract mentions "payment terms", use that exact phrase:
âœ… "What are the payment terms?"

**4. Rephrase If Needed**

If you don't get a good answer, try asking differently:
- "What is the contract value?" â†’ "How much is the total amount?"
- "Who is the buyer?" â†’ "What company is purchasing?"

### Working Efficiently

**1. Start with Example Questions**

The app may show example questions when you load a file. Try these first to understand what the AI can do.

**2. Build on Previous Questions**

The AI remembers your conversation:

```
You: Who is the buyer?
AI: The buyer is Acme Corporation.

You: What is their address?
AI: Acme Corporation's address is 123 Business St, New York, NY 10001.
```

**3. Use the Sample Contract**

Practice with `examples/sample_contract.json` before using real contracts. This helps you learn what questions work best.

### Performance Tips

**1. Be Patient**

- First query: 30-60 seconds (model download)
- Subsequent queries: 3-10 seconds
- This is normal for CPU-based AI

**2. Close Other Applications**

If responses are slow:
- Close unnecessary programs
- Free up RAM
- Close browser tabs

**3. Use Pythia-410M**

If speed is more important than accuracy, use the smaller model.

---

## Troubleshooting

### Application Won't Start

**Problem**: Double-clicking the exe does nothing

**Solutions**:
1. Check if Windows SmartScreen is blocking it:
   - Look for a popup saying "Windows protected your PC"
   - Click "More info" â†’ "Run anyway"

2. Check if antivirus is blocking it:
   - Add an exception for CR2A.exe
   - Temporarily disable antivirus and try again

3. Check system requirements:
   - Windows 10/11 64-bit
   - 8GB RAM minimum
   - 2GB free disk space

### File Won't Load

**Problem**: Error when trying to load a contract file

**Solutions**:

**"File not found"**
- Check the file path is correct
- Make sure the file exists
- Try copying the file to the same folder as the exe

**"Invalid JSON format"**
- The file might be corrupted
- Make sure it's a JSON file (not a text file)
- Try opening it in a text editor to verify it's valid JSON

**"Schema validation failed"**
- The file doesn't have the expected contract structure
- Make sure it was generated by ContractAnalysisCLI.exe
- Check that it has the required fields (parties, terms, risks, dates, financial_terms)

### Model Download Fails

**Problem**: First query fails with download error

**Solutions**:

1. **Check internet connection**
   - Make sure you're connected to the internet
   - Try opening a web browser to verify

2. **Check firewall settings**
   - The app needs to download from huggingface.co
   - Add an exception if your firewall is blocking it

3. **Check disk space**
   - Need ~1GB free space for the model
   - Check `C:\Users\YourName\.cr2a_chat\models\`

4. **Try again**
   - Downloads can be resumed if interrupted
   - Close and reopen the app
   - Try the query again

### Slow Performance

**Problem**: Queries take a long time (>15 seconds)

**Solutions**:

1. **This is normal for CPU-only AI**
   - First query: 30-60 seconds (includes model loading)
   - Subsequent queries: 3-10 seconds
   - This is expected behavior

2. **Use Pythia-410M instead of 1B**
   - Smaller model = faster responses
   - Change in Settings

3. **Close other applications**
   - Free up RAM
   - Close browser tabs
   - Close unnecessary programs

4. **Upgrade your hardware**
   - More RAM helps (16GB recommended)
   - Faster CPU helps
   - SSD instead of HDD helps

### Inaccurate Responses

**Problem**: AI gives wrong or irrelevant answers

**Solutions**:

1. **Rephrase your question**
   - Try asking in a different way
   - Be more specific
   - Use keywords from the contract

2. **Check if the information exists**
   - The AI can only answer based on what's in the JSON file
   - If the information isn't there, it can't answer

3. **Try Pythia-1B**
   - Larger model = more accurate
   - Change in Settings

4. **Enable OpenAI fallback**
   - For complex questions
   - Requires API key and costs money
   - Much more accurate but not free

### Application Crashes

**Problem**: Application closes unexpectedly

**Solutions**:

1. **Check log files**
   - Location: `C:\Users\YourName\.cr2a_chat\logs\`
   - Look for error messages
   - Share with support if needed

2. **Check system resources**
   - Need 8GB RAM minimum
   - Check Task Manager for memory usage
   - Close other applications

3. **Reinstall**
   - Delete the application folder
   - Extract a fresh copy
   - Try again

4. **Report the issue**
   - Include log files
   - Describe what you were doing when it crashed
   - Note your system specs

---

## Frequently Asked Questions

### General Questions

**Q: Do I need internet to use this?**

A: Only for the first-time model download (~800MB). After that, it works completely offline for standard queries. OpenAI fallback requires internet if enabled.

**Q: Does my contract data get sent to the cloud?**

A: No! All processing happens on your computer. Your contract data never leaves your machine (unless you enable OpenAI fallback and explicitly approve each query).

**Q: How much does it cost?**

A: The application is free. OpenAI fallback costs money if you enable it (you pay OpenAI directly for API usage).

**Q: Can I use this on Mac or Linux?**

A: Currently Windows only. Mac and Linux versions may be available in the future.

### Technical Questions

**Q: What AI model does this use?**

A: Pythia LLM from EleutherAI (either 410M or 1B parameter version). Optionally, OpenAI's GPT models for fallback.

**Q: Why is it so slow?**

A: The AI runs on your CPU (not GPU), which is slower. This is intentional to work on any computer without requiring expensive graphics cards.

**Q: How much RAM does it need?**

A: 8GB minimum, 16GB recommended. The AI model uses 2-4GB depending on which version you choose.

**Q: Where are files stored?**

A: 
- Models: `C:\Users\YourName\.cr2a_chat\models\`
- Logs: `C:\Users\YourName\.cr2a_chat\logs\`
- Config: `config.txt` (in the application folder)

**Q: Can I use this with multiple contracts?**

A: Yes! Load different contracts one at a time. The conversation history is preserved when you switch files.

### Usage Questions

**Q: What file format do I need?**

A: JSON files generated by ContractAnalysisCLI.exe. The file must have specific fields (parties, terms, risks, dates, financial_terms).

**Q: Can I analyze PDF or Word documents directly?**

A: No. You must first analyze them with ContractAnalysisCLI.exe to create a JSON file, then load that JSON file into this application.

**Q: What languages are supported?**

A: Currently English only. The AI model is trained primarily on English text.

**Q: Can I export the conversation?**

A: Not in the current version. You can copy and paste from the chat window manually.

### Troubleshooting Questions

**Q: Why does Windows say "Windows protected your PC"?**

A: This is Windows SmartScreen. The executable isn't code-signed, so Windows shows this warning. Click "More info" â†’ "Run anyway". The application is safe.

**Q: Why does my antivirus flag it?**

A: PyInstaller executables sometimes trigger false positives. Add an exception for CR2A.exe. The application is safe.

**Q: What if I get an error?**

A: Check the log files in `C:\Users\YourName\.cr2a_chat\logs\` for details. See the Troubleshooting section above for common issues.

---

## Quick Reference Card

### Essential Commands

| Action | How To |
|--------|--------|
| Launch app | Double-click `CR2A.exe` |
| Load contract | Click "Load Contract" button |
| Ask question | Type in input box, press Enter |
| Scroll history | Use mouse wheel in chat area |
| Close app | Click X button or Alt+F4 |

### Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| Enter | Send message |
| Ctrl+A | Select all text in input |
| Ctrl+C | Copy selected text |
| Ctrl+V | Paste text |
| Alt+F4 | Close application |

### File Locations

| Item | Location |
|------|----------|
| Application | Where you extracted it |
| AI Models | `C:\Users\YourName\.cr2a_chat\models\` |
| Log Files | `C:\Users\YourName\.cr2a_chat\logs\` |
| Config File | `config.txt` (in app folder) |

### System Requirements

| Requirement | Minimum | Recommended |
|-------------|---------|-------------|
| OS | Windows 10 64-bit | Windows 11 64-bit |
| RAM | 8GB | 16GB |
| Disk Space | 2GB | 5GB |
| Internet | First run only | First run only |

---

## Getting Help

### Support Resources

1. **This User Manual** - You're reading it!
2. **README.txt** - Quick start guide in the application folder
3. **Log Files** - Check for error details
4. **FAQ Section** - Common questions answered above

### Contact Support

If you need help:

1. **Check the Troubleshooting section** above
2. **Review the FAQ** for common questions
3. **Check log files** for error messages
4. **Contact your system administrator** or support team

### Reporting Issues

When reporting a problem, include:

- What you were trying to do
- What happened instead
- Error messages (exact text)
- Log files from `C:\Users\YourName\.cr2a_chat\logs\`
- Your system specs (Windows version, RAM, etc.)

---

## Conclusion

Congratulations! You now know how to use CR2A Chat Interface. 

**Remember:**

- âœ… Load a contract file first
- âœ… Wait for the model download on first use
- âœ… Ask clear, specific questions
- âœ… Be patient (AI takes 3-10 seconds)
- âœ… Check the FAQ if you have issues

**Happy querying!** ðŸŽ‰

---

*CR2A Chat Interface v1.0.0 - User Manual*  
*Last Updated: January 30, 2026*
