# ===============================================================
# APS Contract Analysis — Rulebook v1
# Location: contract-analysis-policy-bundle/policy/rulebook_v1.yaml
# Purpose: Human-readable canonical source of policies/rules.
#          YAML chosen so we can keep inline notes for maintainers.
# ===============================================================

meta:
  version: "1.0"            # Rulebook version identifier
  schema_version: "1.0"     # Target schema version for outputs
  owner: "Atlantic Pipe Services (APS)"  # Maintainer/owner info
  generated_at: "2025-10-01T00:00:00Z"   # Timestamp of creation

sections:
  - id: I
    name: "Overview"
    description: >
      Collects eight fixed fields (Project Title, Solicitation No., Owner,
      Contractor, Scope, General Risk Level, Bid Model, Notes).
    rules:
      - "Enforce presence of all 8 fields"
      - "Fields must appear in locked order"

  - id: II
    name: "Contract Clauses"
    description: >
      Maps discovered clauses into canonical section headers (II–VI).
    rules:
      - "Each item must include at least one ClauseBlock"
      - "Closing line required: 'All applicable clauses have been reviewed.'"

  - id: VII
    name: "Grouped Risks"
    description: >
      Collates supplemental risks into groups with sequential numbering.
    rules:
      - "Each risk group contains one or more ClauseBlocks"
      - "Must end with final confirmation line"

  - id: VIII
    name: "Risk Summary"
    description: >
      Summarizes risks in table rows plus a general risk level.
    rules:
      - "Row fields: Risk Area | Risk Summary | Redline Recommendation Summary"
      - "Include one 'General Risk Level' field at bottom"

artifacts:
  # Mirrors what’s tracked in the checksum manifest
  - name: output_schemas_v1
    path: ../schemas/output_schemas_v1.json
  - name: run_manifest_schema_v1
    path: ../schemas/run_manifest_schema_v1.json
  - name: api_schemas_v1
    path: ../schemas/api_schemas_v1.json
  - name: policy_rules_v1
    path: ./policy_rules_v1.json
  - name: control_flags_v1
    path: ./control_flags_v1.json
  - name: validation_rules_v1
    path: ./validation_rules_v1.json
  - name: version_lock.schemas_v1
    path: ./version_lock.schemas_v1.json
