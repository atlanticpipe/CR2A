{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "APS API I/O Schemas",
  "version": "1.0",

  "definitions": {
    "AnalysisRequest": {
      "type": "object",
      "required": ["contract_id", "contract_uri", "fdot_contract"],
      "additionalProperties": false,
      "properties": {
        "contract_id": { "type": "string" },
        "contract_uri": { "type": "string" },
        "fdot_contract": { "type": "boolean" },
        "assume_fdot_year": {
          "type": ["string", "null"]
        },
        "policy_version": { "type": "string" },
        "notes": { "type": "string" }
      }
    },

    "SubmissionResponse": {
      "type": "object",
      "required": ["run_id", "status", "queued_at"],
      "additionalProperties": false,
      "properties": {
        "run_id": { "type": "string" },
        "status": {
          "type": "string",
          "enum": ["queued", "started", "error"]
        },
        "queued_at": { "type": "string" }
      }
    },

    "AnalysisResult": {
      "type": "object",
      "required": ["run_id", "status", "completed_at", "manifest"],
      "additionalProperties": false,
      "properties": {
        "run_id": { "type": "string" },
        "status": {
          "type": "string",
          "enum": ["completed", "failed"]
        },
        "completed_at": { "type": "string" },
        "manifest": {
          "$ref": "run_manifest_schema_v1.json"
        },
        "error": {
          "type": "object",
          "required": ["code", "message"],
          "properties": {
            "code": { "type": "string" },
            "message": { "type": "string" }
          }
        }
      }
    }
  }
}
